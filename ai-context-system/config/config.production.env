# =============================================================================
# 生产环境配置（Production）
# =============================================================================
# 此文件由系统自动加载，当 ENVIRONMENT=production 时生效
# 使用 K8s ConfigMap 和 Secret 管理
# =============================================================================

# 环境标识
NODE_ENV=production
DEBUG=false

# 服务配置
BACKEND_HOST=0.0.0.0
WORKERS=8

# 数据库配置 - 生产环境使用 PostgreSQL
# 注意：密码从 K8s Secret 中读取
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres-service:5432/${POSTGRES_DB}
DATABASE_POOL_SIZE=50
DATABASE_MAX_OVERFLOW=100

# Redis - 生产环境必须启用
REDIS_ENABLED=true
REDIS_HOST=redis-service
REDIS_PORT=6379
REDIS_DB=0
REDIS_POOL_SIZE=20

# Neo4j
NEO4J_ENABLED=true
NEO4J_HOST=neo4j-service
NEO4J_PORT=7687
NEO4J_USER=neo4j
NEO4J_DATABASE=ai_context_prod

# ChromaDB
CHROMA_ENABLED=true
CHROMA_HOST=chroma-service
CHROMA_PORT=8001

# MinIO - 生产环境启用
MINIO_ENABLED=true
MINIO_ENDPOINT=minio-service:9000
MINIO_BUCKET=ai-context-prod
MINIO_SECURE=false

# JWT 认证 - 从 K8s Secret 读取
# JWT_SECRET_KEY=${JWT_SECRET}
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# 文件上传
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=.txt,.md,.pdf,.doc,.docx

# CORS - 生产环境严格限制
# CORS_ORIGINS 从 K8s ConfigMap 读取
CORS_ALLOW_CREDENTIALS=true

# 日志
LOG_LEVEL=INFO
LOG_FILE=/var/log/ai-context/app.log
LOG_FORMAT=json

# 监控 - 生产环境启用
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_ENABLED=true
SENTRY_ENABLED=true

# 性能配置
API_RATE_LIMIT=100
CACHE_TTL=3600

# 前端配置 - 从 K8s ConfigMap 读取
# REACT_APP_API_BASE_URL=${FRONTEND_API_URL}
REACT_APP_ENVIRONMENT=production

# MCP Server
MCP_SERVER_NAME=ai-context-mcp
MCP_LOG_LEVEL=info
MCP_BACKEND_URL=http://backend-service:8000

# 开发工具 - 生产环境禁用
RELOAD=false
ENABLE_SWAGGER=false
ENABLE_PROFILER=false

# 安全 - 生产环境严格
SECURE_COOKIES=true
HTTPS_ONLY=true
SESSION_TIMEOUT=1800
