# AI Agent知识图谱管理系统 - 环境变量配置
# 复制此文件为.env并修改相应的值

# ===== 数据库配置 =====

# PostgreSQL向量数据库
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=knowledge_graph
POSTGRES_USER=kg_user
POSTGRES_PASSWORD=your_postgres_password_here
POSTGRES_MAX_CONNECTIONS=20
POSTGRES_MIN_CONNECTIONS=5

# Neo4j图数据库
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_neo4j_password_here
NEO4J_MAX_CONNECTION_POOL_SIZE=50
NEO4J_CONNECTION_TIMEOUT=30

# Redis缓存
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=10
REDIS_CACHE_TTL=3600
REDIS_SOCKET_TIMEOUT=30

# Elasticsearch全文搜索 (可选)
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_INDEX_PREFIX=kg_
ELASTICSEARCH_TIMEOUT=30

# ===== 应用配置 =====

# 运行环境
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# API配置
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1

# 跨域配置
CORS_ORIGINS=["http://localhost:3000","http://127.0.0.1:3000"]

# ===== AI模型配置 =====

# 默认嵌入模型
DEFAULT_EMBEDDING_MODEL=bge-base-zh-v1.5
VECTOR_DIMENSION=768

# 模型下载配置
HF_HOME=./model_cache
HF_ENDPOINT=https://hf-mirror.com

# ===== 向量搜索配置 =====

# 向量索引配置
VECTOR_INDEX_TYPE=hnsw
VECTOR_INDEX_M=16
VECTOR_INDEX_EF_CONSTRUCTION=64

# 搜索配置
DEFAULT_TOP_K=10
DEFAULT_SIMILARITY_THRESHOLD=0.7
MAX_SEARCH_RESULTS=100

# ===== 图谱配置 =====

# 关键词提取
MIN_KEYWORD_FREQ=2
MAX_KEYWORDS_PER_DOC=20
KEYWORD_SIMILARITY_THRESHOLD=0.7

# 实体识别
ENABLE_NER=true
NER_CONFIDENCE_THRESHOLD=0.8

# ===== 缓存配置 =====

# 查询结果缓存
ENABLE_QUERY_CACHE=true
QUERY_CACHE_TTL=1800
MAX_CACHE_SIZE=1000

# 向量缓存
ENABLE_VECTOR_CACHE=true
VECTOR_CACHE_SIZE=10000

# ===== 安全配置 =====

# JWT配置 (如果需要认证)
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30

# API密钥 (如果需要)
API_KEY=your_api_key_here

# ===== 文件上传配置 =====

# 上传限制
MAX_FILE_SIZE=50MB
ALLOWED_EXTENSIONS=["pdf","docx","txt","md","go","py","js","ts"]

# 存储路径
UPLOAD_DIR=./data/uploads
PROCESSED_DIR=./data/processed

# ===== 监控配置 =====

# 指标收集
ENABLE_METRICS=true
METRICS_PORT=8001

# 日志配置
LOG_FORMAT=json
LOG_FILE=./logs/app.log
LOG_ROTATION=1 day
LOG_RETENTION=30 days

# ===== 开发配置 =====

# 热重载
RELOAD=true

# 调试模式
PROFILE=false
TRACE_REQUESTS=false

# 测试数据
CREATE_SAMPLE_DATA=false
SAMPLE_DATA_SIZE=100

# ===== Docker配置 =====

# 容器内部配置 (docker-compose使用)
POSTGRES_HOST_DOCKER=postgres
NEO4J_URI_DOCKER=bolt://neo4j:7687
REDIS_URL_DOCKER=redis://redis:6379/0
ELASTICSEARCH_URL_DOCKER=http://elasticsearch:9200

# ===== 生产环境配置 =====

# 性能优化
ASYNC_WORKERS=4
DATABASE_POOL_SIZE=20
CONNECTION_TIMEOUT=30

# 安全加固
SECURE_COOKIES=true
HTTPS_ONLY=true
HSTS_MAX_AGE=31536000

# 备份配置
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30